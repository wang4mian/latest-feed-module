### **1. AI分析具体策略 (定义我们“筛选器”的灵魂)**

**- Gemini的prompt设计？**
它是一个**模块化的“思维链” (Chain of Thought)**，让AI一步一步地、有逻辑地输出结果，而不是凭感觉给一个总分。
而且，它需要有一个“前置判断”模块，先告诉AI它现在要扮演哪个领域的专家。
系统（你或你的代码）：在调用Gemini API之前，先根据文章的来源（比如，这个RSS源是关于3D打印的）或标题中的关键词，对文章进行一个**“主题预分类”**，比如，把它标记为topic: "智慧商厨"。
提示词 (Prompt)：将这个topic标签，作为一个变量，动态地插入到我们的提示词模板中。
AI (Gemini)：接收到这个包含了特定“情境”的提示词，然后戴上相应专家的帽子，进行分析。

**打分+分析的 Prompt:**
# [SECTION 1: CONTEXT & ROLE]
You are a senior industry analyst specializing in the field of **{topic}**. Your task is to evaluate the following article based on its relevance, business value, and strategic importance *specifically for the **{topic}** industry*.

# [SECTION 2: CORE TASK - ANALYSIS & EVALUATION]
Analyze the provided article and output your findings in a strict JSON format.

## JSON OUTPUT SPECIFICATION:
{
  "relevance_score": <An integer from 0-100, calculated based on the scoring rubric below>,
  "relevance_reason": "<A concise, one-sentence explanation for the score>",
  "primary_category": "<Choose the most fitting category from: 'Core Equipment', 'Supply Chain', 'Market Trends', 'Technological Innovation', 'Business Models'>",
  "entities": {
    "companies": ["<List of company names mentioned>"],
    "technologies": ["<List of technology names mentioned>"],
    "people": ["<List of key individuals mentioned>"]
  },
  "summary_for_editor": "<A 200-word summary in Chinese, written for an editor. It must highlight the core insights and actionable information relevant to the **{topic}** industry.>",
  "strategic_implication": "<A short analysis (in Chinese) of what this news *means*. Is it an opportunity, a threat, a signal of a new trend, or just noise?>"
}

# [SECTION 3: SCORING RUBRIC & DEFINITIONS]
You must use the following rubric to calculate the relevance_score.

## Base Score based on Article Type (max 50 points):
- Direct discussion of **{topic}** products or companies: 50 points.
- Discussion of adjacent technologies or supply chain for **{topic}**: 40 points.
- Discussion of market trends or business models impacting **{topic}**: 30 points.
- Macroeconomic or general technology news with indirect relevance: 10 points.
- Not relevant: 0 points.

## Bonus Multipliers (applied to the base score):
- **Actionable Signal Multiplier (max 1.5x)**: Multiply by 1.5 if the article contains strong business signals like funding, M&A, financial reports, specific sales data, or customer case studies. Multiply by 1.0 otherwise.
- **Future-Facing Multiplier (max 1.2x)**: Multiply by 1.2 if the article discusses a future trend, a new patent, or a breakthrough innovation. Multiply by 1.0 otherwise.

# [SECTION 4: ARTICLE FOR ANALYSIS]
- **Article Topic**: {topic}
- **Article Title**: {article_title}
- **Article Content**: {article_content}

**- 评分逻辑：“价值发现”而非“内容分类”**
- “基础分”（Base Score）+  “行动信号乘数”（Actionable Signal Multiplier）+ “未来信号乘数”（Future-Facing Multiplier）
-----

### **2. 人工筛选界面细节 (设计我们“指挥官”的驾驶舱)**

**- 文章卡片显示哪些信息？**
每一张卡片，都必须是一个浓缩的“情报摘要”，让你能在一秒钟内做出判断。

  * **[AI评分]** - 字体最大，带颜色（比如\>80分为绿色，60-80为黄色）。
  * **[文章标题]**
  * **[来源网站]** 和 **[发布日期]**
  * **[AI分类]** 和 **[AI提取的实体标签]** - 例如 `[商业模式]`, `[氦豚科技]`, `[计算机视觉]`
  * **[AI生成的摘要]** - 只显示前两行，可展开。
  * **三个核心操作按钮**: `[ 通过 ]`, `[ 暂时搁置 ]`, `[ 彻底拒绝 ]`

**- 筛选和排序功能需求？**

  * **排序**: `按AI评分排序` (默认)、`按发布日期排序`。
  * **筛选**: `按来源网站筛选`、`按AI分类筛选`、`按实体标签筛选`。
  * **搜索框**: 可以在标题和摘要中进行关键词搜索。

**- 批量操作暂时不需要。**
-----

### **3. 编辑发布流程 (规划我们“弹药”的去向)**

**- 编辑后的文章最终输出到哪里？**
应该是一个\*\*“一源多用”（Create Once, Distribute Everywhere）\*\*的架构。
1.  **核心知识库 (Supabase)**: 所有通过筛选、经过编辑的最终内容，都应该以结构化的形式，存入 supabase 的 articles 表里。
2.  **Markdown文件**: 为每一篇精选内容，生成一个干净的、格式标准的Markdown文件，存入一个专门的Git仓库或文件夹。这是为了备份、迁移和与其他系统集成的灵活性。

**- 需要发布到外部平台吗？**
**需要。** 这是让我们的“情报”产生外部价值的关键。目前有几种：
  * 我们的“简报“页面。
  * 对外的**行业洞察博客/公众号**。
  * 在社交媒体（如LinkedIn）上发布内容的素材库。

**- 还是仅生成markdown文件？**
仅生成Markdown是第一步，是“**生产弹药**”。但我们的最终目的，是把这些弹药“**发射出去**”，所以必须有多渠道发布的规划。
-----

### **4. 错误处理策略 (为我们的系统建立“容错机制”)**
  * **RSS源失效**: 建立一个监控和告警机制。如果一个RSS源连续3次抓取失败，系统应自动将其标记为“**待检查**”，并发送通知给我们，而不是无限地重试导致系统资源浪费。
  * **AI API调用失败**: 采用\*\*“指数退避”重试策略 (Exponential Backoff)\*\*。即第一次失败后等2秒再试，第二次等4秒，第三次等8秒……重试3-5次后仍失败，则将该任务标记为“**AI分析失败**”，并记录错误日志，等待人工处理。
  * **数据一致性**: 为每一篇从RSS源抓取下来的文章，生成一个**唯一的ID**（可以用文章的URL做哈希）。用这个ID作为数据库的主键，可以有效防止重复抓取和数据错乱。

-----

### **5. 运营细节 (决定我们是“单兵”还是“军团”)**
  * **需要用户登录系统吗？**
      * **V1.0版本：不需要。** 我们现在是“**单人作战模式**”。先不要在登录、权限这些复杂的事情上浪费时间。我们的核心，是先把“情报-\>洞察”这条核心流水线跑通。

  * **多用户协作需求？**
      * **V2.0版本：需要。** 当我们的系统验证了价值，需要组建一个“情报分析团队”时，才需要引入多用户和权限管理。比如，有“筛选员”、“编辑”、“发布员”等不同角色。

  * **数据统计和报表需求？**
      * **从第一天就需要，但保持简单。** 我们需要一个最基础的“仪表盘”，来回答几个核心的运营问题：
          * 今天系统自动抓取了多少篇文章？
          * AI筛选通过/拒绝了多少篇？
          * 人工筛选通过/拒绝了多少篇？
          * 各个信息源（RSS）的“信噪比”如何？（哪个源产出的高分文章最多？）
